# 
# Holistic aggregate test case for the filtered replicator
# plugin integration with the transaction_log module
#
# This file runs the tests in various .inc files. The
# portions of the results that are non deterministic
# are then removed for making a comparision to a 
# result file.
#
#

# Ignore startup/shutdown events
--disable_query_log
--source ../plugin/transaction_log/tests/t/truncate_log.inc
--enable_query_log

# Filter all statements involving tables called "t2"
set global filtered_replicator_filteredtables=t2;

--source ../plugin/transaction_log/tests/t/insert.inc
--source ../plugin/transaction_log/tests/t/insert_multi.inc
--source ../plugin/transaction_log/tests/t/insert_select.inc
--source ../plugin/transaction_log/tests/t/alter.inc
--source ../plugin/transaction_log/tests/t/schema.inc
--source ../plugin/transaction_log/tests/t/rename.inc
--source ../plugin/transaction_log/tests/t/delete.inc
--source ../plugin/transaction_log/tests/t/update.inc
#--source ../plugin/transaction_log/tests/t/auto_commit.inc
#--source ../plugin/transaction_log/tests/t/temp_tables.inc

# MySQL Bug 36763
#--source ../plugin/transaction_log/tests/t/truncate.inc
# Needs fixing
#--source ../plugin/transaction_log/tests/t/rand.inc

# Read in the transaction.log.

--exec ../drizzled/message/transaction_reader var/master-data/local/transaction.log

# Truncate the log file to reset for the next test
--source ../plugin/transaction_log/tests/t/truncate_log.inc
